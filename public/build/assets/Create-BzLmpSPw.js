import{r as y,W as w,j as e}from"./app-opL4tPRS.js";import{A as z,G as L,T as A,a as I,B as E,b as D,S as c,g as P,I as G,k as H}from"./AppLayout-BBXMtu6L.js";import{B as M}from"./Breadcrumbs-HzMZe2ql.js";import{F as g}from"./id-DRmwXiKX.js";import{u as U,S as F,L as q,P as W,R as t}from"./index-1ery_BfE.js";import{I as S}from"./IconCornerDownLeft-BR-q8Um-.js";import{D as _}from"./Divider-b4UljXpl.js";import{G as p}from"./Grid-DsX-EBOt.js";import{C as $}from"./Center-F8FxJeFX.js";import{I as N}from"./Indicator-Bhqku34T.js";import{S as R}from"./Select-DWbBu4ol.js";import{R as l}from"./Radio-Dk7-kKE0.js";import{N as J}from"./NumberInput-B0owS9Ht.js";import"./Title-CVf4nZny.js";import"./dayjs.min-TP8tiIEA.js";import"./TypographyStylesProvider-RknkcSvr.js";import"./TextInput-CacUwhst.js";import"./InputBase-CoADICdG.js";import"./ColorSwatch-DUVl9Dsp.js";import"./SimpleGrid-Bxcmn5UV.js";import"./get-base-value-BoJ4u0RI.js";import"./get-auto-contrast-value-Da6zqqWm.js";import"./OptionsDropdown-Qere5_8B.js";import"./CheckIcon-rj9mbUFy.js";import"./ScrollArea-BUvcNB0c.js";import"./InputsGroupFieldset-C6ZLfSO5.js";const be=d=>{var x,f,j,b,v,k,C;console.log(d);const[h,B]=y.useState(""),a=w({exercise_id:"",athlete_id:"",note:"",evaluations:[]}),u=d.criterias.map(i=>({...i,sub_criterias:i.sub_criterias.filter(s=>i.name!=="Teknik Bertanding"||s.name===h).map(s=>({...s,sub_sub_criterias:s.sub_sub_criterias}))}));y.useEffect(()=>{h&&a.setData("evaluations",u.flatMap(i=>i.sub_criterias.flatMap(s=>s.sub_sub_criterias.map(r=>({sub_sub_criteria_id:r.id,value:"-"})))))},[h]);const T=U({extensions:[F,q,W.configure({placeholder:"Masukkan catatan"})],content:a.data.note,onUpdate({editor:i}){a.setData("note",i.getHTML())}});return e.jsx("form",{onSubmit:i=>{i.preventDefault(),a.post(route("evaluations.store"))},children:e.jsxs(z,{title:"Penilaian",authed:d.auth.user,meta:d.meta,unreadHistories:d.total_unread_histories,children:[e.jsxs(L,{w:"100%",justify:"space-between",children:[e.jsx(M,{navList:[{label:"Penilaian",route:"evaluations.index"},{label:"Tambah"}]}),e.jsx(A,{style:{borderRadius:32,padding:".5rem 1rem"},label:"Tambah Penilaian",children:e.jsx(I,{type:"submit",ml:"auto",h:48,w:48,color:"gold.2",radius:32,display:{base:"block",xs:"none"},disabled:a.hasErrors||!a.data.exercise_id,children:e.jsx(S,{})})}),e.jsx(E,{display:{base:"none",xs:"block"},type:"submit",w:240,leftSection:e.jsx(S,{}),variant:"filled",color:"gold.2",h:48,px:16,styles:{section:{marginRight:12}},radius:32,loading:a.processing,disabled:a.hasErrors||!a.data.exercise_id,children:"Tambah Penilaian"})]}),e.jsx(_,{my:32}),e.jsxs(p,{grow:!0,justify:"space-between",children:[e.jsx(p.Col,{span:{base:12,md:4},children:e.jsx($,{children:e.jsx(N,{styles:{indicator:{padding:16,border:"4px solid white"}},inline:!0,color:"gold.2",label:a.data.athlete_id?(f=(x=d.exercises.find(i=>i.id===a.data.exercise_id))==null?void 0:x.athletes.find(i=>i.id===a.data.athlete_id))==null?void 0:f.role:"Atlet",position:"bottom-center",size:32,withBorder:!0,children:e.jsx(D,{mx:"auto",src:(b=(j=d.exercises.find(i=>i.id===a.data.exercise_id))==null?void 0:j.athletes.find(i=>i.id===a.data.athlete_id))==null?void 0:b.avatar,alt:(k=(v=d.exercises.find(i=>i.id===a.data.exercise_id))==null?void 0:v.athletes.find(i=>i.id===a.data.athlete_id))==null?void 0:k.name,size:160})})})}),e.jsx(p.Col,{span:{base:12,md:8},children:e.jsxs(c,{gap:48,children:[e.jsxs(g,{radius:20,legend:"Informasi Penilaian",styles:{root:{margin:0,padding:16},legend:{borderRadius:20,fontSize:16,padding:16,fontWeight:"bold"}},children:[e.jsx(R,{mb:16,withAsterisk:!0,variant:"filled",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:e.jsx(P,{}),label:"Latihan",clearable:!0,searchable:!0,nothingFoundMessage:"Tidak ada latihan ditemukan",placeholder:"Pilih latihan...",checkIconPosition:"right",onChange:i=>{a.setData("exercise_id",i),i?a.clearErrors("exercise_id"):a.setError({exercise_id:"Latihan tidak boleh kosong."})},data:d.exercises.map(i=>({value:i.id,label:`${i.name} (${new Date(i.date).toLocaleDateString("id").split("/").join("-")})`})),error:a.errors.exercise_id}),e.jsx(R,{disabled:!a.data.exercise_id,withAsterisk:!0,variant:"filled",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:e.jsx(G,{}),label:"Atlet",clearable:!0,searchable:!0,nothingFoundMessage:"Tidak ada atlet ditemukan",placeholder:"Pilih atlet...",checkIconPosition:"right",onChange:i=>{var s,r;a.setData("athlete_id",i),B((r=(s=d.exercises.find(m=>m.id===a.data.exercise_id))==null?void 0:s.athletes.find(m=>m.id===i))==null?void 0:r.role),i?a.clearErrors("athlete_id"):a.setError({athlete_id:"Atlet tidak boleh kosong."})},data:(C=d.exercises.find(i=>i.id===a.data.exercise_id))==null?void 0:C.athletes.map(i=>({value:i.id,label:`${i.full_name} (${i.role})`})),error:a.errors.athlete_id})]}),a.data.athlete_id&&e.jsxs(c,{gap:48,children:[u.map(i=>e.jsxs(c,{gap:0,children:[e.jsx(_,{label:i==null?void 0:i.name.toUpperCase(),styles:{label:{fontSize:"14px"}},labelPosition:"center"}),i.sub_criterias.map(s=>e.jsx(g,{radius:20,legend:s.name,styles:{root:{margin:0,padding:16},legend:{borderRadius:20,fontSize:16,padding:16,fontWeight:"bold"}},children:e.jsx(c,{children:s.sub_sub_criterias.map((r,m)=>r.type==="radio"?e.jsx(l.Group,{description:r.description,label:r.name,withAsterisk:!!r.required,styles:{label:{marginBottom:8},description:{marginBottom:8},error:{marginTop:8}},onChange:o=>{a.data.evaluations.forEach(n=>{n.sub_sub_criteria_id===r.id&&(n.value=o)}),a.setData("evaluations",a.data.evaluations)},children:e.jsxs(L,{gap:32,children:[e.jsx(l,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("1")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"1",label:"1",color:"gold.2"}),e.jsx(l,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("2")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"2",label:"2",color:"gold.2"}),e.jsx(l,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("3")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"3",label:"3",color:"gold.2"}),e.jsx(l,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("4")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"4",label:"4",color:"gold.2"}),e.jsx(l,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("5")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"5",label:"5",color:"gold.2"})]})},r.id):r.type==="number"?e.jsx(J,{hideControls:!0,description:r.description,label:r.name,withAsterisk:!!r.required,variant:"filled",styles:{label:{marginBottom:8},description:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:16,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},placeholder:"Masukkan nilai...",onChange:o=>{a.data.evaluations.forEach(n=>{n.sub_sub_criteria_id===r.id&&(n.value=o)}),a.setData("evaluations",a.data.evaluations)},error:a.errors.email},r.id):e.jsx(TextInput,{description:r.description,label:r.name,withAsterisk:!!r.required,variant:"filled",styles:{description:{marginBottom:8},label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:16,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},placeholder:"Masukkan nilai...",onChange:o=>{a.data.evaluations.forEach(n=>{n.sub_sub_criteria_id===r.id&&(n.value=o.target.value)}),a.setData("evaluations",a.data.evaluations)},error:a.errors.value},r.id))})},s.id))]},i.id)),e.jsxs(g,{radius:20,legend:"Informasi Tambahan",styles:{root:{margin:0,padding:16},legend:{borderRadius:20,fontSize:16,padding:16,fontWeight:"bold"}},children:[e.jsx(H,{fz:14,children:"Catatan"}),e.jsxs(t,{editor:T,style:{borderRadius:20,fontSize:14},children:[e.jsxs(t.Toolbar,{children:[e.jsxs(t.ControlsGroup,{children:[e.jsx(t.Bold,{}),e.jsx(t.Italic,{}),e.jsx(t.Underline,{}),e.jsx(t.Strikethrough,{}),e.jsx(t.ClearFormatting,{}),e.jsx(t.Highlight,{}),e.jsx(t.Code,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.H1,{}),e.jsx(t.H2,{}),e.jsx(t.H3,{}),e.jsx(t.H4,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.Blockquote,{}),e.jsx(t.Hr,{}),e.jsx(t.BulletList,{}),e.jsx(t.OrderedList,{}),e.jsx(t.Subscript,{}),e.jsx(t.Superscript,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.Link,{}),e.jsx(t.Unlink,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.AlignLeft,{}),e.jsx(t.AlignCenter,{}),e.jsx(t.AlignJustify,{}),e.jsx(t.AlignRight,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.Undo,{}),e.jsx(t.Redo,{})]})]}),e.jsx(t.Content,{})]})]})]})]})})]})]})})};export{be as default};
