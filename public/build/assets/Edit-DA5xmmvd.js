import{r as y,W as z,j as e}from"./app-opL4tPRS.js";import{A,G as C,T,a as E,B as I,b as D,S as h,I as L,k as P}from"./AppLayout-BBXMtu6L.js";import{B as G}from"./Breadcrumbs-HzMZe2ql.js";import{F as x}from"./id-DRmwXiKX.js";import{u as U,S as H,L as M,P as $,R as t}from"./index-1ery_BfE.js";import{I as S}from"./IconCornerDownLeft-BR-q8Um-.js";import{G as f}from"./Grid-DsX-EBOt.js";import{C as F}from"./Center-F8FxJeFX.js";import{I as q}from"./Indicator-Bhqku34T.js";import{S as R}from"./Select-DWbBu4ol.js";import{D as W}from"./Divider-b4UljXpl.js";import{R as u}from"./Radio-Dk7-kKE0.js";import{N}from"./NumberInput-B0owS9Ht.js";import{T as J}from"./TextInput-CacUwhst.js";import"./Title-CVf4nZny.js";import"./dayjs.min-TP8tiIEA.js";import"./TypographyStylesProvider-RknkcSvr.js";import"./ColorSwatch-DUVl9Dsp.js";import"./SimpleGrid-Bxcmn5UV.js";import"./get-base-value-BoJ4u0RI.js";import"./get-auto-contrast-value-Da6zqqWm.js";import"./OptionsDropdown-Qere5_8B.js";import"./CheckIcon-rj9mbUFy.js";import"./ScrollArea-BUvcNB0c.js";import"./InputBase-CoADICdG.js";import"./InputsGroupFieldset-C6ZLfSO5.js";const ve=s=>{var j,b,v;console.log(s);const[g,B]=y.useState(s.exercise_evaluation.athlete.role),a=z({exercise_id:s.exercise_evaluation.exercise.id,athlete_id:s.exercise_evaluation.athlete.id,note:s.exercise_evaluation.note,evaluations:s.exercise_evaluation.evaluations.map(i=>({sub_sub_criteria_id:i.sub_sub_criteria_id,value:i.value}))}),p=s.criterias.map(i=>({...i,sub_criterias:i.sub_criterias.filter(l=>i.name!=="Teknik Bertanding"||l.name===g).map(l=>({...l,sub_sub_criterias:l.sub_sub_criterias}))}));y.useEffect(()=>{g&&a.setData("evaluations",p.flatMap(i=>i.sub_criterias.flatMap(l=>l.sub_sub_criterias.map(r=>{const d=a.data.evaluations.find(m=>m.sub_sub_criteria_id===r.id);return{sub_sub_criteria_id:r.id,value:d?d.value:""}}))))},[g]);const w=U({extensions:[H,M,$.configure({placeholder:"Masukkan catatan"})],content:a.data.note,onUpdate({editor:i}){a.setData("note",i.getHTML())}}),c=[...((j=s.exercises.find(i=>i.id===a.data.exercise_id))==null?void 0:j.athletes)||[],...s.exercise_evaluation.athlete?[s.exercise_evaluation.athlete]:[]].find(i=>i.id===a.data.athlete_id);return e.jsx("form",{onSubmit:i=>{i.preventDefault(),a.put(route("evaluations.update",s.exercise_evaluation.id))},children:e.jsxs(A,{title:`Penilaian Latihan ${a.data.exercise_id?`'${(b=[...s.exercises,s.exercise_evaluation.exercise].find(i=>i.id===a.data.exercise_id))==null?void 0:b.name}'`:""}`,authed:s.auth.user,meta:s.meta,unreadHistories:s.total_unread_histories,children:[e.jsxs(C,{w:"100%",justify:"space-between",mb:32,children:[e.jsx(G,{navList:[{label:"Penilaian",route:"evaluations.index"},{label:"Ubah"}]}),e.jsx(T,{style:{borderRadius:32,padding:".5rem 1rem"},label:"Ubah Penilaian",children:e.jsx(E,{type:"submit",ml:"auto",h:48,w:48,color:"gold.2",radius:32,display:{base:"block",xs:"none"},children:e.jsx(S,{})})}),e.jsx(I,{display:{base:"none",xs:"block"},type:"submit",w:240,leftSection:e.jsx(S,{}),variant:"filled",color:"gold.2",h:48,px:16,styles:{section:{marginRight:12}},radius:32,loading:a.processing,children:"Ubah Penilaian"})]}),e.jsxs(f,{grow:!0,justify:"space-between",children:[e.jsx(f.Col,{span:{base:12,md:4},children:e.jsx(F,{children:e.jsx(q,{styles:{indicator:{padding:16,border:"4px solid white"}},inline:!0,color:"gold.2",label:c?c.role:"Atlet",position:"bottom-center",size:32,withBorder:!0,children:e.jsx(D,{mx:"auto",src:c?c.avatar:null,alt:c?c.full_name:null,size:160})})})}),e.jsx(f.Col,{span:{base:12,md:8},children:e.jsxs(h,{gap:48,children:[e.jsxs(x,{radius:20,legend:"Informasi Penilaian",styles:{root:{margin:0,padding:16},legend:{borderRadius:20,fontSize:16,padding:16,fontWeight:"bold"}},children:[e.jsx(R,{mb:16,withAsterisk:!0,variant:"filled",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:e.jsx(L,{}),label:"Latihan",clearable:!0,searchable:!0,value:a.data.exercise_id,nothingFoundMessage:"Tidak ada latihan ditemukan",placeholder:"Pilih latihan...",checkIconPosition:"right",onChange:i=>{a.setData("exercise_id",i),i?a.clearErrors("exercise_id"):a.setError({exercise_id:"Latihan tidak boleh kosong."})},data:s.exercises.map(i=>({value:i.id,label:`${i.name} (${new Date(i.date).toLocaleDateString("id").split("/").join("-")})`})),error:a.errors.exercise_id}),e.jsx(R,{value:a.data.athlete_id,disabled:!a.data.exercise_id,withAsterisk:!0,variant:"filled",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:e.jsx(L,{}),label:"Atlet",clearable:!0,searchable:!0,nothingFoundMessage:"Tidak ada atlet ditemukan",placeholder:"Pilih atlet...",checkIconPosition:"right",onChange:i=>{var l,r;a.setData("athlete_id",i),B((r=(l=s.exercises.find(d=>d.id===a.data.exercise_id))==null?void 0:l.athletes.find(d=>d.id===i))==null?void 0:r.role),i?a.clearErrors("athlete_id"):a.setError({athlete_id:"Atlet tidak boleh kosong."})},data:[...((v=s.exercises.find(i=>i.id===a.data.exercise_id))==null?void 0:v.athletes)||[],s.exercise_evaluation.athlete?s.exercise_evaluation.athlete:[]].map(i=>({value:i.id,label:`${i.full_name} (${i.role})`})),error:a.errors.athlete_id})]}),a.data.exercise_id&&e.jsxs(h,{gap:48,children:[p.map(i=>e.jsxs(h,{gap:0,children:[e.jsx(W,{label:i==null?void 0:i.name.toUpperCase(),styles:{label:{fontSize:"14px"}},labelPosition:"center"}),i.sub_criterias.map(l=>e.jsx(x,{radius:20,legend:l.name,styles:{root:{margin:0,padding:16},legend:{borderRadius:20,fontSize:16,padding:16,fontWeight:"bold"}},children:e.jsx(h,{children:l.sub_sub_criterias.map((r,d)=>{var m,_,k;return r.type==="radio"?e.jsx(u.Group,{value:(m=a.data.evaluations.find(o=>o.sub_sub_criteria_id===r.id))==null?void 0:m.value,description:r.description,label:r.name,withAsterisk:!!r.required,styles:{label:{marginBottom:8},description:{marginBottom:8},error:{marginTop:8}},onChange:o=>{a.data.evaluations.forEach(n=>{n.sub_sub_criteria_id===r.id&&(n.value=o)}),a.setData("evaluations",a.data.evaluations)},children:e.jsxs(C,{gap:32,children:[e.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("1")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"1",label:"1",color:"gold.2"}),e.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("2")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"2",label:"2",color:"gold.2"}),e.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("3")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"3",label:"3",color:"gold.2"}),e.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("4")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"4",label:"4",color:"gold.2"}),e.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:a.data.evaluations.map(o=>o.sub_sub_criteria_id===r.id&&o.value).includes("5")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"5",label:"5",color:"gold.2"})]})},r.id):r.type==="number"?e.jsx(N,{value:(_=a.data.evaluations.find(o=>o.sub_sub_criteria_id===r.id))==null?void 0:_.value,hideControls:!0,description:r.description,label:r.name,withAsterisk:!!r.required,variant:"filled",styles:{label:{marginBottom:8},description:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:16,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},placeholder:"Masukkan nilai...",onChange:o=>{a.data.evaluations.forEach(n=>{n.sub_sub_criteria_id===r.id&&(n.value=o)}),a.setData("evaluations",a.data.evaluations)},error:a.errors.email},r.id):e.jsx(J,{value:(k=a.data.evaluations.find(o=>o.sub_sub_criteria_id===r.id))==null?void 0:k.value,description:r.description,label:r.name,withAsterisk:!!r.required,variant:"filled",styles:{description:{marginBottom:8},label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:16,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},placeholder:"Masukkan nilai...",onChange:o=>{a.data.evaluations.forEach(n=>{n.sub_sub_criteria_id===r.id&&(n.value=o.target.value)}),a.setData("evaluations",a.data.evaluations)},error:a.errors.value},r.id)})})},l.id))]},i.id)),e.jsxs(x,{radius:20,legend:"Informasi Tambahan",styles:{root:{margin:0,padding:16},legend:{borderRadius:20,fontSize:16,padding:16,fontWeight:"bold"}},children:[e.jsx(P,{fz:14,children:"Catatan"}),e.jsxs(t,{editor:w,style:{borderRadius:20,fontSize:14},children:[e.jsxs(t.Toolbar,{children:[e.jsxs(t.ControlsGroup,{children:[e.jsx(t.Bold,{}),e.jsx(t.Italic,{}),e.jsx(t.Underline,{}),e.jsx(t.Strikethrough,{}),e.jsx(t.ClearFormatting,{}),e.jsx(t.Highlight,{}),e.jsx(t.Code,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.H1,{}),e.jsx(t.H2,{}),e.jsx(t.H3,{}),e.jsx(t.H4,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.Blockquote,{}),e.jsx(t.Hr,{}),e.jsx(t.BulletList,{}),e.jsx(t.OrderedList,{}),e.jsx(t.Subscript,{}),e.jsx(t.Superscript,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.Link,{}),e.jsx(t.Unlink,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.AlignLeft,{}),e.jsx(t.AlignCenter,{}),e.jsx(t.AlignJustify,{}),e.jsx(t.AlignRight,{})]}),e.jsxs(t.ControlsGroup,{children:[e.jsx(t.Undo,{}),e.jsx(t.Redo,{})]})]}),e.jsx(t.Content,{})]})]})]})]})})]})]})})};export{ve as default};
