import{r as P,j as e,B as o}from"./app-Pz5Td4aK.js";import{d as _,A as B,S as g,G as n,T as R,a as F,B as z,b as I,k as a}from"./AppLayout-CgstnK6u.js";import{B as M}from"./Breadcrumbs-Lj6BezEw.js";import{S as k}from"./Select-Dkx4wJR-.js";import{I as S,G as r}from"./IconCalendar-b2aWmR8n.js";import{T as m}from"./Title-xuOukjAe.js";import{S as $}from"./SimpleGrid-BZhHdUnw.js";import{D as A}from"./Divider-Cwnu1Ulg.js";import{L,T as N}from"./TypographyStylesProvider-BHXlwyez.js";import{C as t}from"./Center-CNROwVXS.js";import"./OptionsDropdown-Bt-osuS7.js";import"./CheckIcon-C34qmD5j.js";import"./ScrollArea-qritgqCM.js";import"./get-base-value-BRmQQuPj.js";/**
 * @license @tabler/icons-react v3.4.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v=_("outline","printer","IconPrinter",[["path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2",key:"svg-0"}],["path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4",key:"svg-1"}],["path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z",key:"svg-2"}]]);const ee=l=>{console.log(l);const[f,b]=P.useState(!1),[y,x]=P.useState(null),w=y===null?l.evaluations:l.evaluations.filter(s=>s.period===Number(y)),T=s=>{var i;return(i=w.find(h=>h.id===s))==null?void 0:i.tournaments.reduce((h,d)=>d.medal==="Emas"?h+3:d.medal==="Perak"?h+2:d.medal==="Perunggu"?h+1:h,0)};return e.jsxs(B,{title:"Laporan",isPrint:f,authed:l.auth.user,meta:l.meta,unreadHistories:l.total_unread_histories,children:[f?e.jsx(m,{size:34,align:"center",mb:32,children:"Laporan"}):e.jsxs(g,{mb:32,children:[e.jsxs(n,{w:"100%",justify:"space-between",children:[e.jsx(M,{navList:[{label:"Laporan",route:"reports.index"},{label:"Rincian"}]}),e.jsxs(n,{children:[e.jsx(k,{display:{base:"none",xs:"block"},w:240,leftSection:e.jsx(S,{}),placeholder:"Pilih periode...",variant:"filled",clearable:!0,searchable:!0,nothingFoundMessage:"Tidak ada periode ditemukan",checkIconPosition:"right",onChange:s=>{x(s===null?null:s)},data:l.evaluations.map(s=>({label:`${s.period}`,value:`${s.period}`})),allowDeselect:!0,styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}}}),l.auth.user.role.includes("Pelatih")&&e.jsxs(e.Fragment,{children:[e.jsx(R,{style:{borderRadius:32,padding:".5rem 1rem"},label:"Cetak",children:e.jsx(F,{ml:"auto",h:48,w:48,color:"gold.2",radius:32,display:{base:"block",sm:"none"},onClick:()=>window.print(),children:e.jsx(v,{})})}),e.jsx(z,{display:{base:"none",sm:"block"},w:240,leftSection:e.jsx(v,{}),variant:"filled",color:"gold.2",h:48,radius:32,px:16,styles:{section:{marginRight:12}},onClick:()=>{b(!0),setTimeout(()=>{window.print(),b(!1)},1e3)},children:"Cetak"})]})]})]}),e.jsx(k,{w:"100%",clearable:!0,searchable:!0,allowDeselect:!0,nothingFoundMessage:"Tidak ada periode ditemukan",display:{base:"block",xs:"none"},leftSection:e.jsx(S,{}),placeholder:"Pilih periode...",variant:"filled",checkIconPosition:"right",onChange:s=>{x(s===null?null:s)},data:l.evaluations.map(s=>({label:`${s.period}`,value:`${s.period}`})),styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}}})]}),e.jsxs(g,{gap:80,children:[e.jsxs(r,{align:"center",children:[e.jsx(r.Col,{span:4,children:e.jsx(I,{src:l.athlete.avatar,alt:l.athlete.full_name,size:160})}),e.jsx(r.Col,{span:8,children:e.jsxs($,{cols:2,children:[e.jsxs(o,{children:[e.jsx(a,{children:"Nama Lengkap :"}),e.jsx(a,{fw:600,children:l.athlete.full_name})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Jenis Kelamin :"}),e.jsx(a,{fw:600,children:l.athlete.gender})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Tanggal Lahir :"}),e.jsx(a,{fw:600,children:new Date(l.athlete.birth_date).toLocaleDateString("id").split("/").join("-")})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Alamat Surel :"}),e.jsx(a,{fw:600,children:l.athlete.email})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Sistem Pertandingan :"}),e.jsx(a,{fw:600,children:l.athlete.role})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Berat Badan :"}),e.jsxs(a,{fw:600,children:[l.athlete.weight," kg"]})]})]})})]}),w.map(s=>e.jsxs(g,{gap:32,children:[e.jsx(A,{label:`Periode ${s.period} (${new Date(s.start_date).toLocaleDateString("id").split("/").join("-")} - ${new Date(s.end_date).toLocaleDateString("id").split("/").join("-")})`,labelPosition:"center",styles:{label:{fontSize:14}}}),s.exercises.length&&e.jsxs(o,{children:[e.jsx(m,{fz:26,mb:8,children:"Daftar Latihan"}),e.jsx(L,{type:"ordered",children:s.exercises.map(i=>e.jsxs(L.Item,{fz:10,children:[i.name," di ",i.place," pada",new Date(i.date).toLocaleDateString("id").split("/").join("-")]},i.id))})]}),s.tournaments.length&&e.jsxs(o,{children:[e.jsx(m,{fz:26,mb:8,children:"Daftar Pertandingan"}),e.jsxs(r,{gutter:0,children:[e.jsx(r.Col,{span:9,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Nama Pertandingan"})}),e.jsx(r.Col,{span:3,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Medali (Poin)"})}),e.jsx(r.Col,{span:9,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600})}),e.jsx(r.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Emas (3)"})}),e.jsx(r.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Perak (2)"})}),e.jsx(r.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Perunggu (1)"})}),s.tournaments.map(i=>e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{span:9,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:i.name})}),e.jsx(r.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:i.medal==="Emas"?1:"-"})}),e.jsx(r.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:i.medal==="Perak"?1:"-"})}),e.jsx(r.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:i.medal==="Perunggu"?1:"-"})})]})),e.jsx(r.Col,{span:9,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:"Total"})}),e.jsx(r.Col,{span:3,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:T(s.id)})})]})]}),e.jsxs(o,{children:[e.jsx(m,{fz:26,mb:8,children:"Daftar Penilaian"}),e.jsxs(r,{gutter:0,children:[e.jsx(r.Col,{span:11,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Kriteria"})}),e.jsx(r.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Nilai"})}),s.criterias.map((i,h)=>e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:i.name.toUpperCase()})},h),i.sub_criterias.map((d,p)=>{const u=String.fromCharCode(65+p);return e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{children:e.jsxs(n,{style:{border:"1px solid #e1e1e1"},px:16,fw:600,h:48,children:[u,". ",d.name]})},p),d.sub_sub_criterias.map((j,c)=>e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{span:11,children:e.jsxs(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:[c+1,". ",j.name]})},c),e.jsx(r.Col,{span:1,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:j.evaluation.value})})]}))]})}),i.type==="radio"&&e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{span:11,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:"Rata-rata"})}),e.jsx(r.Col,{span:1,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:(()=>{let d=0;const p=i.sub_criterias.reduce((u,j)=>{const c=j.sub_sub_criterias.reduce((C,D)=>({sum:C.sum+Number(D.evaluation.value),count:C.count+1}),{sum:0,count:0});return d+=c.count,u+c.sum},0);return Number((p/d).toFixed(2))})()})})]})]})),e.jsx(r.Col,{span:12,children:e.jsxs(n,{style:{overflow:"auto",border:"1px solid #e1e1e1"},px:16,py:11,children:[e.jsx(a,{fw:600,children:"Catatan : "}),e.jsx(N,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.note}})})]})})]})]})]},s.id))]})]})};export{ee as default};
