import{r as k,j as e,B as o,O as H}from"./app-opL4tPRS.js";import{b as P,F as M,T as D,a as F,A as G,S as f,G as a,B as W,j as $,k as n}from"./AppLayout-BBXMtu6L.js";import{B as K}from"./Breadcrumbs-HzMZe2ql.js";import{T as h,b as O,I as J}from"./Table-ERm7-3kp.js";import{M as R,I as v}from"./MonthPickerInput-tiCfLglU.js";import{I as _}from"./clsx-4-RmyeO0.js";import{G as l}from"./Grid-DsX-EBOt.js";import{S as U}from"./SimpleGrid-Bxcmn5UV.js";import{D as B}from"./Divider-b4UljXpl.js";import{C as d}from"./Center-F8FxJeFX.js";import{T as Y}from"./TypographyStylesProvider-RknkcSvr.js";import"./Title-CVf4nZny.js";import"./ScrollArea-BUvcNB0c.js";import"./use-dates-input-98d-ymRe.js";import"./dayjs.min-TP8tiIEA.js";import"./get-base-value-BoJ4u0RI.js";const ce=r=>{var C,S,L;const[p,w]=k.useState(null);k.useState(""),console.log(r);const y=(C=r.exerciseEvaluations)==null?void 0:C.filter(s=>p===null?!0:new Date(s.exercise.date).toLocaleDateString("id").split("/").join("-").includes(p)),m=(S=r.tournaments)==null?void 0:S.filter(s=>p===null?!0:new Date(s.date).toLocaleDateString("id").split("/").join("-").includes(p)),I=m.reduce((s,t)=>t.medal==="Emas"?s+3:t.medal==="Perak"?s+2:t.medal==="Perunggu"?s+1:s,0),N=["#","Foto","Nama Lengkap","Sistem Pertandingan","Total Penilaian Latihan","Total Pertandingan","Aksi"],z=[{label:"Rincian Laporan",icon:e.jsx(J,{}),onClick:s=>H.get(route("reports.show",s.user)),color:"blue"}],A=(L=r.reports)==null?void 0:L.map((s,t)=>e.jsxs(h.Tr,{h:64,children:[e.jsx(h.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:t+1}),e.jsx(h.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:e.jsx(P,{src:s.user.avatar,alt:s.user.full_name})}),e.jsx(h.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:s.user.full_name}),e.jsx(h.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:s.user.role}),e.jsx(h.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:s.evaluations.length}),e.jsx(h.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:s.tournaments.length}),e.jsx(h.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:e.jsx(M,{gap:8,style:{whiteSpace:"nowrap"},children:z.map((i,g)=>e.jsx(D,{label:i.label,style:{borderRadius:32,padding:".5rem 1rem"},children:e.jsx(F,{size:48,radius:32,variant:"subtle","aria-label":i.label,color:i.color,onClick:()=>i.onClick(s),disabled:i.disabled,children:i.icon})},g))})})]},t));return e.jsxs(G,{title:"Laporan",authed:r.auth.user,meta:r.meta,unreadHistories:r.total_unread_histories,children:[e.jsxs(f,{mb:32,children:[e.jsxs(a,{w:"100%",justify:"space-between",children:[e.jsx(K,{navList:[{label:"Laporan"}]}),["Ne-Waza","Fighting"].includes(r.auth.user.role)&&e.jsxs(a,{children:[e.jsx(R,{display:{base:"none",xs:"block"},w:240,leftSection:e.jsx(_,{}),placeholder:"Pilih waktu...",variant:"filled",onChange:s=>{if(s===null)w(null);else{const t=s.getMonth()+1,i=s.getFullYear();w(`${t}-${i}`)}},allowDeselect:!0,locale:"id",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8},calendarHeader:{height:48},calendarHeaderControl:{height:48,width:48,borderRadius:32}}}),r.auth.user.role.includes("Pelatih")&&e.jsxs(e.Fragment,{children:[e.jsx(D,{style:{borderRadius:32,padding:".5rem 1rem"},label:"Cetak",children:e.jsx(F,{ml:"auto",h:48,w:48,color:"gold.2",radius:32,display:{base:"block",sm:"none"},onClick:()=>window.print(),children:e.jsx(v,{})})}),e.jsx(W,{display:{base:"none",sm:"block"},w:240,leftSection:e.jsx(v,{}),variant:"filled",color:"gold.2",h:48,radius:32,px:16,styles:{section:{marginRight:12}},onClick:()=>window.print(),children:"Cetak"})]})]})]}),["Ne-Waza","Fighting"].includes(r.auth.user.role)&&e.jsx(R,{w:"100%",clearable:!0,display:{base:"block",xs:"none"},leftSection:e.jsx(_,{}),placeholder:"Pilih waktu...",variant:"filled",onChange:s=>{setMonth(month===""?s.getMonth()+1:"")},locale:"id",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8},calendarHeader:{height:48},calendarHeaderControl:{height:48,width:48,borderRadius:32}}})]}),["Ne-Waza","Fighting"].includes(r.auth.user.role)?e.jsxs(f,{gap:80,children:[e.jsxs(l,{align:"center",children:[e.jsx(l.Col,{span:4,children:e.jsx(P,{src:r.auth.user.avatar,alt:r.auth.user.full_name,size:160})}),e.jsx(l.Col,{span:8,children:e.jsxs(U,{cols:2,children:[e.jsxs(o,{children:[e.jsx(n,{children:"Nama Lengkap :"}),e.jsx(n,{fw:600,children:r.auth.user.full_name})]}),e.jsxs(o,{children:[e.jsx(n,{children:"Jenis Kelamin :"}),e.jsx(n,{fw:600,children:r.auth.user.gender})]}),e.jsxs(o,{children:[e.jsx(n,{children:"Tanggal Lahir :"}),e.jsx(n,{fw:600,children:new Date(r.auth.user.birth_date).toLocaleDateString("id").split("/").join("-")})]}),e.jsxs(o,{children:[e.jsx(n,{children:"Alamat Surel :"}),e.jsx(n,{fw:600,children:r.auth.user.email})]}),e.jsxs(o,{children:[e.jsx(n,{children:"Sistem Pertandingan :"}),e.jsx(n,{fw:600,children:r.auth.user.role})]}),e.jsxs(o,{children:[e.jsx(n,{children:"Berat Badan :"}),e.jsxs(n,{fw:600,children:[r.auth.user.athlete.weight," kg"]})]})]})})]}),!!y.length&&e.jsxs(o,{children:[e.jsx(B,{mb:32,label:"Daftar Latihan",labelPosition:"center",styles:{label:{fontSize:14}}}),e.jsx(f,{gap:32,children:y.map((s,t)=>e.jsxs(o,{children:[e.jsxs(n,{mb:16,children:[t+1,". ",s.exercise.name," di ",s.exercise.place," pada ",new Date(s.exercise.date).toLocaleDateString("id").split("/").join("-")]}),e.jsxs(l,{gutter:0,children:[e.jsx(l.Col,{span:11,children:e.jsx(a,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Kriteria"})}),e.jsx(l.Col,{span:1,children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Nilai"})}),s.criterias.map((i,g)=>e.jsxs(e.Fragment,{children:[e.jsx(l.Col,{children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:i.name.toUpperCase()})},g),i.sub_criterias.map((c,j)=>{const b=String.fromCharCode(65+j);return e.jsxs(e.Fragment,{children:[e.jsx(l.Col,{children:e.jsxs(a,{style:{border:"1px solid #e1e1e1"},px:16,fw:600,h:48,children:[b,". ",c.name]})},j),c.sub_sub_criterias.map((u,x)=>e.jsxs(e.Fragment,{children:[e.jsx(l.Col,{span:11,children:e.jsxs(a,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:[x+1,". ",u.name]})},x),e.jsx(l.Col,{span:1,children:e.jsx(a,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:u.evaluation.value})})]}))]})}),i.type==="radio"&&e.jsxs(e.Fragment,{children:[e.jsx(l.Col,{span:11,children:e.jsx(a,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:"Rata-rata"})}),e.jsx(l.Col,{span:1,children:e.jsx(a,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:(()=>{let c=0;const j=i.sub_criterias.reduce((b,u)=>{const x=u.sub_sub_criterias.reduce((T,E)=>({sum:T.sum+Number(E.evaluation.value),count:T.count+1}),{sum:0,count:0});return c+=x.count,b+x.sum},0);return Number((j/c).toFixed(2))})()})})]})]})),e.jsx(l.Col,{span:12,children:e.jsxs(a,{style:{overflow:"auto",border:"1px solid #e1e1e1"},px:16,py:11,children:[e.jsx(n,{fw:600,children:"Catatan : "}),e.jsx(Y,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.note}})})]})})]})]},s.id))})]}),!!m.length&&e.jsxs(o,{children:[e.jsx(B,{mb:32,label:"Daftar Pertandingan",labelPosition:"center",styles:{label:{fontSize:14}}}),e.jsxs(l,{gutter:0,children:[e.jsx(l.Col,{span:9,children:e.jsx(a,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Nama Pertandingan"})}),e.jsx(l.Col,{span:3,children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Medali (Poin)"})}),e.jsx(l.Col,{span:9,children:e.jsx(a,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600})}),e.jsx(l.Col,{span:1,children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Emas (3)"})}),e.jsx(l.Col,{span:1,children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Perak (2)"})}),e.jsx(l.Col,{span:1,children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Perunggu (1)"})}),m.map(s=>e.jsxs(e.Fragment,{children:[e.jsx(l.Col,{span:9,children:e.jsx(a,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:s.name})}),e.jsx(l.Col,{span:1,children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:s.medal==="Emas"?1:"-"})}),e.jsx(l.Col,{span:1,children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:s.medal==="Perak"?1:"-"})}),e.jsx(l.Col,{span:1,children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:s.medal==="Perunggu"?1:"-"})})]})),e.jsx(l.Col,{span:9,children:e.jsx(a,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:"Total"})}),e.jsx(l.Col,{span:3,children:e.jsx(d,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:I})})]})]})]}):e.jsx(O,{thList:N,tdList:A,icon:e.jsx($,{size:48}),title:"Laporan"})]})};export{ce as default};
