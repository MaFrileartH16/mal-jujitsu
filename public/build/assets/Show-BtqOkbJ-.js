import{r as L,j as e,B as a}from"./app-opL4tPRS.js";import{A as F,S as g,G as i,T as I,a as M,B as A,b as E,k as n}from"./AppLayout-BBXMtu6L.js";import{B as H}from"./Breadcrumbs-HzMZe2ql.js";import{M as S,I as T}from"./MonthPickerInput-tiCfLglU.js";import{I as D}from"./clsx-4-RmyeO0.js";import{T as G}from"./Title-CVf4nZny.js";import{G as r}from"./Grid-DsX-EBOt.js";import{S as N}from"./SimpleGrid-Bxcmn5UV.js";import{D as B}from"./Divider-b4UljXpl.js";import{C as t}from"./Center-F8FxJeFX.js";import{T as z}from"./TypographyStylesProvider-RknkcSvr.js";import"./use-dates-input-98d-ymRe.js";import"./dayjs.min-TP8tiIEA.js";import"./get-base-value-BoJ4u0RI.js";const re=l=>{var C,P;const[x,b]=L.useState(null),[f,w]=L.useState(!1);console.log(l);const y=(C=l.exerciseEvaluations)==null?void 0:C.filter(s=>x===null?!0:new Date(s.exercise.date).toLocaleDateString("id").split("/").join("-").includes(x)),m=(P=l.tournaments)==null?void 0:P.filter(s=>x===null?!0:new Date(s.date).toLocaleDateString("id").split("/").join("-").includes(x)),R=m.reduce((s,d)=>d.medal==="Emas"?s+3:d.medal==="Perak"?s+2:d.medal==="Perunggu"?s+1:s,0);return window.onbeforeprint=function(){console.log("Print dialog opened!")},window.onafterprint=function(){console.log("Print dialog closed!")},e.jsxs(F,{title:`Laporan "${l.athlete.full_name}"`,authed:l.auth.user,meta:l.meta,isPrint:f,unreadHistories:l.total_unread_histories,children:[f?e.jsx(G,{size:34,align:"center",mb:32,children:"Laporan"}):e.jsxs(g,{mb:32,children:[e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsx(H,{navList:[{label:"Laporan",route:"reports.index"},{label:"Rincian"}]}),e.jsxs(i,{children:[e.jsx(S,{display:{base:"none",xs:"block"},w:240,leftSection:e.jsx(D,{}),placeholder:"Pilih waktu...",variant:"filled",onChange:s=>{if(s===null)b(null);else{const d=s.getMonth()+1,o=s.getFullYear();b(`${d}-${o}`)}},allowDeselect:!0,locale:"id",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8},calendarHeader:{height:48},calendarHeaderControl:{height:48,width:48,borderRadius:32}}}),l.auth.user.role.includes("Pelatih")&&e.jsxs(e.Fragment,{children:[e.jsx(I,{style:{borderRadius:32,padding:".5rem 1rem"},label:"Cetak",children:e.jsx(M,{ml:"auto",h:48,w:48,color:"gold.2",radius:32,display:{base:"block",sm:"none"},onClick:()=>window.print(),children:e.jsx(T,{})})}),e.jsx(A,{display:{base:"none",sm:"block"},w:240,leftSection:e.jsx(T,{}),variant:"filled",color:"gold.2",h:48,radius:32,px:16,styles:{section:{marginRight:12}},onClick:()=>{w(!0),setTimeout(()=>{window.print(),w(!1)},1e3)},children:"Cetak"})]})]})]}),e.jsx(S,{w:"100%",clearable:!0,display:{base:"block",xs:"none"},leftSection:e.jsx(D,{}),placeholder:"Pilih waktu...",variant:"filled",onChange:s=>{setMonth(month===""?s.getMonth()+1:"")},locale:"id",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8},calendarHeader:{height:48},calendarHeaderControl:{height:48,width:48,borderRadius:32}}})]}),e.jsxs(g,{gap:80,children:[e.jsxs(r,{align:"center",grow:!0,children:[e.jsx(r.Col,{span:{base:12,sm:4},mb:{base:32,sm:0},children:e.jsx(E,{mx:{base:"auto",sm:0},src:l.athlete.avatar,alt:l.athlete.full_name,size:160})}),e.jsx(r.Col,{span:8,children:e.jsxs(N,{cols:2,children:[e.jsxs(a,{children:[e.jsx(n,{children:"Nama Lengkap :"}),e.jsx(n,{fw:600,children:l.athlete.full_name})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Jenis Kelamin :"}),e.jsx(n,{fw:600,children:l.athlete.gender})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Tanggal Lahir :"}),e.jsx(n,{fw:600,children:new Date(l.athlete.birth_date).toLocaleDateString("id").split("/").join("-")})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Alamat Surel :"}),e.jsx(n,{fw:600,children:l.athlete.email})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Sistem Pertandingan :"}),e.jsx(n,{fw:600,children:l.athlete.role})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Berat Badan :"}),e.jsxs(n,{fw:600,children:[l.athlete.weight," kg"]})]})]})})]}),!!y.length&&e.jsxs(a,{children:[e.jsx(B,{mb:32,label:"Daftar Latihan",labelPosition:"center",styles:{label:{fontSize:14}}}),e.jsx(g,{gap:32,children:y.map((s,d)=>e.jsxs(a,{children:[e.jsxs(n,{mb:16,children:[d+1,". ",s.exercise.name," di ",s.exercise.place," pada ",new Date(s.exercise.date).toLocaleDateString("id").split("/").join("-")]}),e.jsxs(r,{gutter:0,children:[e.jsx(r.Col,{span:10,children:e.jsx(i,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Kriteria"})}),e.jsx(r.Col,{span:2,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Nilai"})}),s.criterias.map((o,_)=>e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:o.name.toUpperCase()})},_),o.sub_criterias.map((h,j)=>{const u=String.fromCharCode(65+j);return e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{children:e.jsxs(i,{style:{border:"1px solid #e1e1e1"},px:16,fw:600,h:48,children:[u,". ",h.name]})},j),h.sub_sub_criterias.map((p,c)=>e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{span:10,children:e.jsxs(i,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:[c+1,". ",p.name]})},c),e.jsx(r.Col,{span:2,children:e.jsx(i,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:p.evaluation.value})})]}))]})}),o.type==="radio"&&e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{span:10,children:e.jsx(i,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:"Rata-rata"})}),e.jsx(r.Col,{span:2,children:e.jsx(i,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:(()=>{let h=0;const j=o.sub_criterias.reduce((u,p)=>{const c=p.sub_sub_criterias.reduce((k,v)=>({sum:k.sum+Number(v.evaluation.value),count:k.count+1}),{sum:0,count:0});return h+=c.count,u+c.sum},0);return Number((j/h).toFixed(2))})()})})]})]})),e.jsx(r.Col,{span:12,children:e.jsxs(i,{style:{border:"1px solid #e1e1e1"},px:16,py:11,children:[e.jsx(n,{fw:600,children:"Catatan : "}),e.jsx(z,{children:e.jsx("div",{style:{wordBreak:"break-all"},dangerouslySetInnerHTML:{__html:s.note}})})]})})]})]},s.id))})]}),!!m.length&&e.jsxs(a,{children:[e.jsx(B,{mb:32,label:"Daftar Pertandingan",labelPosition:"center",styles:{label:{fontSize:14}}}),e.jsxs(r,{gutter:0,children:[e.jsx(r.Col,{span:6,children:e.jsx(i,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Nama Pertandingan"})}),e.jsx(r.Col,{span:6,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Medali (Poin)"})}),e.jsx(r.Col,{span:6,children:e.jsx(i,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600})}),e.jsx(r.Col,{span:2,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Emas (3)"})}),e.jsx(r.Col,{span:2,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Perak (2)"})}),e.jsx(r.Col,{span:2,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Perunggu (1)"})}),m.map((s,d)=>e.jsxs(e.Fragment,{children:[e.jsx(r.Col,{span:6,children:e.jsx(i,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:s.name})}),e.jsx(r.Col,{span:2,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:s.medal==="Emas"?1:"-"})}),e.jsx(r.Col,{span:2,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:s.medal==="Perak"?1:"-"})}),e.jsx(r.Col,{span:2,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:s.medal==="Perunggu"?1:"-"})})]})),e.jsx(r.Col,{span:6,children:e.jsx(i,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:"Total"})}),e.jsx(r.Col,{span:6,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:R})})]})]})]})]})};export{re as default};
