import{r as k,W as T,j as i}from"./app-opL4tPRS.js";import{A as E,G as L,b as w,S as c,I as S,k as B}from"./AppLayout-BBXMtu6L.js";import{B as D}from"./Breadcrumbs-HzMZe2ql.js";import{F as h}from"./id-DRmwXiKX.js";import{u as I,S as P,L as M,P as A,R as y}from"./index-1ery_BfE.js";import{G as f}from"./Grid-DsX-EBOt.js";import{C as $}from"./Center-F8FxJeFX.js";import{I as G}from"./Indicator-Bhqku34T.js";import{S as R}from"./Select-DWbBu4ol.js";import{D as F}from"./Divider-b4UljXpl.js";import{R as u}from"./Radio-Dk7-kKE0.js";import{N as W}from"./NumberInput-B0owS9Ht.js";import{T as U}from"./TextInput-CacUwhst.js";import"./Title-CVf4nZny.js";import"./dayjs.min-TP8tiIEA.js";import"./TypographyStylesProvider-RknkcSvr.js";import"./ColorSwatch-DUVl9Dsp.js";import"./SimpleGrid-Bxcmn5UV.js";import"./get-base-value-BoJ4u0RI.js";import"./get-auto-contrast-value-Da6zqqWm.js";import"./OptionsDropdown-Qere5_8B.js";import"./CheckIcon-rj9mbUFy.js";import"./ScrollArea-BUvcNB0c.js";import"./InputBase-CoADICdG.js";import"./InputsGroupFieldset-C6ZLfSO5.js";const fe=d=>{var p,b,v;console.log(d);const[g,z]=k.useState(d.exercise_evaluation.athlete.role),e=T({exercise_id:d.exercise_evaluation.exercise.id,athlete_id:d.exercise_evaluation.athlete.id,note:d.exercise_evaluation.note,evaluations:d.exercise_evaluation.evaluations.map(a=>({sub_sub_criteria_id:a.sub_sub_criteria_id,value:a.value}))}),x=d.criterias.map(a=>({...a,sub_criterias:a.sub_criterias.filter(l=>a.name!=="Teknik Bertanding"||l.name===g).map(l=>({...l,sub_sub_criterias:l.sub_sub_criterias}))}));k.useEffect(()=>{g&&e.setData("evaluations",x.flatMap(a=>a.sub_criterias.flatMap(l=>l.sub_sub_criterias.map(t=>{const n=e.data.evaluations.find(m=>m.sub_sub_criteria_id===t.id);return{sub_sub_criteria_id:t.id,value:n?n.value:""}}))))},[g]);const C=I({extensions:[P,M,A.configure({placeholder:"Masukkan catatan"})],content:e.data.note,onUpdate({editor:a}){e.setData("note",a.getHTML())},editable:!1}),s=[...((p=d.exercises.find(a=>a.id===e.data.exercise_id))==null?void 0:p.athletes)||[],...d.exercise_evaluation.athlete?[d.exercise_evaluation.athlete]:[]].find(a=>a.id===e.data.athlete_id);return i.jsx("form",{onSubmit:a=>{a.preventDefault(),e.put(route("evaluations.update",d.exercise_evaluation.id))},children:i.jsxs(E,{title:`Penilaian Latihan ${e.data.exercise_id?`'${(b=[...d.exercises,d.exercise_evaluation.exercise].find(a=>a.id===e.data.exercise_id))==null?void 0:b.name}'`:""}`,authed:d.auth.user,meta:d.meta,unreadHistories:d.total_unread_histories,children:[i.jsx(L,{w:"100%",justify:"space-between",mb:32,children:i.jsx(D,{navList:[{label:"Penilaian",route:"evaluations.index"},{label:"Rincian"}]})}),i.jsxs(f,{grow:!0,justify:"space-between",children:[i.jsx(f.Col,{span:{base:12,md:4},children:i.jsx($,{children:i.jsx(G,{styles:{indicator:{padding:16,border:"4px solid white"}},inline:!0,color:"gold.2",label:s?s.role:"Atlet",position:"bottom-center",size:32,withBorder:!0,children:i.jsx(w,{mx:"auto",src:s?s.avatar:null,alt:s?s.full_name:null,size:160})})})}),i.jsx(f.Col,{span:{base:12,md:8},children:i.jsxs(c,{gap:48,children:[i.jsxs(h,{radius:20,legend:"Informasi Penilaian",styles:{root:{margin:0,padding:16},legend:{borderRadius:20,fontSize:16,padding:16,fontWeight:"bold"}},children:[i.jsx(R,{mb:16,disabled:!0,variant:"filled",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:i.jsx(S,{}),label:"Latihan",clearable:!0,searchable:!0,value:e.data.exercise_id,nothingFoundMessage:"Tidak ada latihan ditemukan",placeholder:"Pilih latihan...",checkIconPosition:"right",onChange:a=>{e.setData("exercise_id",a),a?e.clearErrors("exercise_id"):e.setError({exercise_id:"Latihan tidak boleh kosong."})},data:d.exercises.map(a=>({value:a.id,label:`${a.name} (${new Date(a.date).toLocaleDateString("id").split("/").join("-")})`})),error:e.errors.exercise_id}),i.jsx(R,{value:e.data.athlete_id,disabled:!0,variant:"filled",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:i.jsx(S,{}),label:"Atlet",clearable:!0,searchable:!0,nothingFoundMessage:"Tidak ada atlet ditemukan",placeholder:"Pilih atlet...",checkIconPosition:"right",onChange:a=>{var l,t;e.setData("athlete_id",a),z((t=(l=d.exercises.find(n=>n.id===e.data.exercise_id))==null?void 0:l.athletes.find(n=>n.id===a))==null?void 0:t.role),a?e.clearErrors("athlete_id"):e.setError({athlete_id:"Atlet tidak boleh kosong."})},data:[...((v=d.exercises.find(a=>a.id===e.data.exercise_id))==null?void 0:v.athletes)||[],d.exercise_evaluation.athlete?d.exercise_evaluation.athlete:[]].map(a=>({value:a.id,label:`${a.full_name} (${a.role})`})),error:e.errors.athlete_id})]}),e.data.exercise_id&&i.jsxs(c,{gap:48,children:[x.map(a=>i.jsxs(c,{gap:0,children:[i.jsx(F,{label:a==null?void 0:a.name.toUpperCase(),styles:{label:{fontSize:"14px"}},labelPosition:"center"}),a.sub_criterias.map(l=>i.jsx(h,{radius:20,legend:l.name,styles:{root:{margin:0,padding:16},legend:{borderRadius:20,fontSize:16,padding:16,fontWeight:"bold"}},children:i.jsx(c,{children:l.sub_sub_criterias.map((t,n)=>{var m,_,j;return t.type==="radio"?i.jsx(u.Group,{value:(m=e.data.evaluations.find(r=>r.sub_sub_criteria_id===t.id))==null?void 0:m.value,description:t.description,label:t.name,styles:{label:{marginBottom:8},description:{marginBottom:8},error:{marginTop:8}},onChange:r=>{e.data.evaluations.forEach(o=>{o.sub_sub_criteria_id===t.id&&(o.value=r)}),e.setData("evaluations",e.data.evaluations)},children:i.jsxs(L,{gap:32,children:[i.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:e.data.evaluations.map(r=>r.sub_sub_criteria_id===t.id&&r.value).includes("1")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"1",label:"1",color:"gold.2"}),i.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:e.data.evaluations.map(r=>r.sub_sub_criteria_id===t.id&&r.value).includes("2")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"2",label:"2",color:"gold.2"}),i.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:e.data.evaluations.map(r=>r.sub_sub_criteria_id===t.id&&r.value).includes("3")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"3",label:"3",color:"gold.2"}),i.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:e.data.evaluations.map(r=>r.sub_sub_criteria_id===t.id&&r.value).includes("4")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"4",label:"4",color:"gold.2"}),i.jsx(u,{styles:{label:{marginLeft:16,padding:0,fontSize:14},radio:{border:0,backgroundColor:e.data.evaluations.map(r=>r.sub_sub_criteria_id===t.id&&r.value).includes("5")?"var(--mantine-color-gold-2)":"#f1f3f5"}},size:"md",value:"5",label:"5",color:"gold.2"})]})},t.id):t.type==="number"?i.jsx(W,{value:(_=e.data.evaluations.find(r=>r.sub_sub_criteria_id===t.id))==null?void 0:_.value,hideControls:!0,description:t.description,label:t.name,disabled:!0,variant:"filled",styles:{label:{marginBottom:8},description:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:16,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},placeholder:"Masukkan nilai...",onChange:r=>{e.data.evaluations.forEach(o=>{o.sub_sub_criteria_id===t.id&&(o.value=r)}),e.setData("evaluations",e.data.evaluations)},error:e.errors.email},t.id):i.jsx(U,{value:(j=e.data.evaluations.find(r=>r.sub_sub_criteria_id===t.id))==null?void 0:j.value,description:t.description,label:t.name,disabled:!0,variant:"filled",styles:{description:{marginBottom:8},label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:16,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},placeholder:"Masukkan nilai...",onChange:r=>{e.data.evaluations.forEach(o=>{o.sub_sub_criteria_id===t.id&&(o.value=r.target.value)}),e.setData("evaluations",e.data.evaluations)},error:e.errors.value},t.id)})})},l.id))]},a.id)),i.jsxs(h,{radius:20,legend:"Informasi Tambahan",styles:{root:{margin:0,padding:16},legend:{borderRadius:20,fontSize:16,padding:16,fontWeight:"bold"}},children:[i.jsx(B,{fz:14,mb:8,children:"Catatan"}),i.jsx(y,{editor:C,style:{borderRadius:20,fontSize:14},children:i.jsx(y.Content,{})})]})]})]})})]})]})})};export{fe as default};
